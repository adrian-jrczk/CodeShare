<!DOCTYPE html>

<html lang="en">

<head>
	<meta charset="utf-8">
	<title>Api | CodeShare</title>
	<link href="/css/styles.css" rel="stylesheet">
</head>

<body>
	<div id="top-bar">
		<a href="/" class="button b-big">HOME</a>
		<a href="/my-code" class="button b-big">MY CODE</a>
		<a href="/post" class="button b-big">POST</a>
		<a href="/access-form" class="button b-big">ACCESS</a>
		<a href="/api-view" class="button b-big b-bright">API</a>
		<div sec:authorize="isAuthenticated()" class="log-container">
			<form th:action="@{/logout}" method="post">
				<span>Logged as: <span sec:authentication="name"></span>  </span>
				<button type="submit" class="button">Log out</button>
				<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
			</form>
		</div>
		<div sec:authorize="isAnonymous()" class="log-container">
			<span>Not logged in  <a href="/login" class="button">Log in</a></span>
		</div>
	</div>
	
	<div class="panel p-center-large">
		<div class="large-text-container">
			<span>Every endpoint returns Response object. Apart from /api/register every request
				should be authenticated with username and password.</span>
			<hr>
			<h2>Endpoints:</h2>
				<ul>
					<li>/api/code</li>
						<ul>
							<li>Return code with given uuid</li>
							<li>Request parameters: String uuid</li>
							<li>Request body: none</li>
						</ul>
					<li>/api/post</li>
						<ul>
							<li>Post given code</li>
							<li>Request parameters: none</li>
							<li>Request body: Code object</li>
						</ul>
					<li>/api/delete</li>
						<ul>
							<li>Delete code with given uuid</li>
							<li>Request parameters: String uuid</li>
							<li>Request body: none</li>
						</ul>
					<li>/api/update</li>
						<ul>
							<li>Update given code</li>
							<li>Request parameters: none</li>
							<li>Request body: Code object</li>
						</ul>
					<li>/api/my-code</li>
						<ul>
							<li>Return list of code posted by me</li>
							<li>Request parameters: none</li>
							<li>Request body: none</li>
						</ul>
					<li>/api/register</li>
						<ul>
							<li>Register given user</li>
							<li>Request parameters: none</li>
							<li>Request body: User object</li>
						</ul>
				</ul>
			<hr>
			<h2>Objects:</h2>
				<ul>
					<li>Response</li>
						<ul>
							<li>String result</li>
							<li>String message</li>
							<li>String uuid</li>
							<li>Code code</li>
						</ul>
					<li>Code</li>
						<ul>
							<li>String name (required)</li>
							<li>String code (required)</li>
							<li>boolean setAsPrivate</li>
							<li>boolean editable</li>
							<li>int viewsAllowed</li>
							<li>long minutesAllowed</li>
						</ul>
					<li>User</li>
						<ul>
							<li>String name (required)</li>
							<li>String password (required)</li>
						</ul>
				</ul>
		</div>
	</div>

</body>

</html>